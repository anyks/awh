#!/usr/bin/env sh

# Экспортируем все существующие пути где могут лежать приложения
export PATH="/usr/bin:/usr/local/bin:/opt/local/bin:$PATH"

# Получаем название скрипта
readonly NAME=$0
# Получаем корневую дирректорию
readonly ROOT=$(cd "$(dirname "$0")" && pwd)
# CMake адрес
readonly CMAKE=$(cmake --system-information | grep CMAKE_ROOT | cut -d= -f2 | awk '{print $2}' | sed "s/^\([\"']\)\(.*\)\1\$/\2/g")
# Адрес размещения файла CMake
readonly $CMAKE_PATH_AWH "/usr/share/cmake-awh"

# Если адрес файла CMake существует
if [ -f "$CMAKE_PATH_AWH/FindAWH.cmake" ]; then
	# Выводим сообщение, что мы запустили процесс регистрации
	echo "Process registration CMake started"

	# Перемещаем CMake файл в нужный нам каталог
	mv $CMAKE_PATH_AWH/FindAWH.cmake "$CMAKE/Modules"/
	# Удаляем ненужный нам каталог
	rm -rf $CMAKE_PATH_AWH

	# Выводим сообщение, что мы завершили процесс регистрации
	echo "Process registration CMake finished"
fi

# Переходим в временный каталог
cd $ROOT
# Удаляем каталог с скриптами
rm $NAME
