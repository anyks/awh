/**
 * @file: notifier.cpp
 * @date: 2025-09-16
 * @license: GPL-3.0
 *
 * @telegram: @forman
 * @author: Yuriy Lobarev
 * @phone: +7 (910) 983-95-90
 * @email: forman@anyks.com
 * @site: https://anyks.com
 *
 * @copyright: Copyright ¬© 2025
 */


#if defined(__sun)
    #pragma message("üîç Trying to include <port.h>...")
    #include <port.h>
    #pragma message("‚úÖ Included <port.h> from: " __FILE__)
#endif

/**
 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Sun Solaris
 */
#if __sun__
	/**
	 * –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
	 */
	// –Ø–≤–Ω–æ –≤–∫–ª—é—á–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
	// #include <sys/types.h>
	// #include <sys/port.h>   // ‚Üê –ò–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è port_event_t
	#include <port.h>


	

	/**
	 * –°–æ–∑–¥–∞—ë–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è
	 */
	static constexpr uintptr_t USER_EVENT = 1;
/**
 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Linux
 */
#elif __linux__
	/**
	 * –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
	 */
	#include <sys/epoll.h>
	#include <sys/eventfd.h>
/**
 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OpenBSD
 */
#elif __OpenBSD__
	/**
	 * –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
	 */
	#include <fcntl.h>
	#include <unistd.h>
/**
 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã  MacOS X, FreeBSD –∏–ª–∏ NetBSD
 */
#elif __APPLE__ || __MACH__ || __FreeBSD__ || __NetBSD__
	/**
	 * –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
	 */
	#include <sys/event.h>

	/**
	 * –°–æ–∑–¥–∞—ë–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è
	 */
	static constexpr uintptr_t USER_EVENT = 1;
#endif

/**
 * –ü–æ–¥–∫–ª—é—á–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
 */
#include <events/notifier.hpp>

/**
 * –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω
 */
using namespace std;

/**
 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OS Windows
 */
#if _WIN32 || _WIN64
	/**
	 * socketpair –ú–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—ã —Å–æ–∫–µ—Ç–æ–≤
	 * @param socks      —Å–ø–∏—Å–æ–∫ —Å–æ–∫–µ—Ç–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
	 * @param overlapped —Ñ–ª–∞–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞
	 * @return           —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
	 */
	static int64_t socketpair(SOCKET socks[2], const bool overlapped = true) noexcept {
		/**
		 * –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
		 */
		union {
			struct sockaddr_in inaddr; // –û–±—ä–µ–∫—Ç —Å–ª—É—à–∞—Ç–µ–ª—è
			struct sockaddr addr;      // –û–±—ä–µ–∫—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
		} a;
		// –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–ª—É—à–∞—Ç–µ–ª—è
		socklen_t addrlen = sizeof(a.inaddr);
		// –ü–æ–ª—É—á–∞–µ–º —Ñ–ª–∞–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∫–µ—Ç–∞
		DWORD flags = (overlapped ? WSA_FLAG_OVERLAPPED : 0);
		// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç—ã –ø—É—Å—Ç—ã–µ
		if(socks == 0){
			// –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
			::WSASetLastError(WSAEINVAL);
			// –í—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É
			return INVALID_SOCKET;
		}
		// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–∫–µ—Ç–æ–≤
		socks[0] = socks[1] = INVALID_SOCKET;
		// –°–æ–∑–¥–∞—ë–º —Å–æ–∫–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è
		const SOCKET listener = ::socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
		// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è –Ω–µ —Å–æ–∑–¥–∞–Ω
		if(listener == INVALID_SOCKET)
			// –í—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É
			return INVALID_SOCKET;
		// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
		::memset(&a, 0, sizeof(a));
		// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω—É–ª–µ–≤–æ–π –ø–æ—Ä—Ç —Ç–∞–∫-–∫–∞–∫ –æ–Ω –Ω–∞–º –Ω–µ –Ω—É–∂–µ–Ω
		a.inaddr.sin_port = 0;
		// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–º–µ–π—Å—Ç–≤–æ —Å–æ–∫–µ—Ç–æ–≤
		a.inaddr.sin_family = AF_INET;
		// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ç–ª–µ–≤–æ–π —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (127.0.0.1)
		a.inaddr.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
		// –§–æ—Ä–º–∏—Ä—É–µ–º —Ñ–ª–∞–≥ —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–π –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç—ã
		const int32_t reuse = 1;
		/**
		 * –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–æ–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
		 */
		for(;;){
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–π –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤
			if(::setsockopt(listener, SOL_SOCKET, SO_REUSEADDR, reinterpret_cast <const char *> (&reuse), (socklen_t) sizeof(reuse)) == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			// –í—ã–ø–æ–ª–Ω—è–µ–º –±–∏–Ω–¥–∏–Ω–≥ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–æ–∫–µ—Ç–∞
			if(::bind(listener, &a.addr, sizeof(a.inaddr)) == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			// –û–±–Ω—É–ª—è–µ–º –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
			::memset(&a, 0, sizeof(a));
			// –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è —Å–æ–∫–µ—Ç–∞
			if(::getsockname(listener, &a.addr, &addrlen) == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			/**
			 * Win32 GetockName –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞, p = 0,0005.
			 * ( http://msdn.microsoft.com/library/ms738543.aspx )
			 */
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–º–µ–π—Å—Ç–≤–æ IPv4-–∞–¥—Ä–µ—Å–æ–≤ 
			a.inaddr.sin_family = AF_INET;
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ç–ª–µ–≤–æ–π —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (127.0.0.1)
			a.inaddr.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
			// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞
			if(::listen(listener, 1) == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			// –°–æ–∑–¥–∞—ë–º —Å–æ–∫–µ—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
			socks[0] = ::WSASocket(AF_INET, SOCK_STREAM, 0, nullptr, 0, flags);
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω
			if(socks[0] == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			// –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–æ–∫–µ—Ç—É –Ω–∞ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
			if(::connect(socks[0], &a.addr, sizeof(a.inaddr)) == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			// –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–æ–∫–µ—Ç—É –∏ —ç—Ç–æ —É –Ω–∞—Å –±—É–¥–µ—Ç —Å–æ–∫–µ—Ç –Ω–∞ –∑–∞–ø–∏—Å—å
			socks[1] = ::accept(listener, nullptr, nullptr);
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω
			if(socks[1] == INVALID_SOCKET)
				// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
				break;
			// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è
			::closesocket(listener);
			// –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–æ–æ–±—â–∞–µ–º, —á—Ç–æ –≤—Å–µ —Å–æ–∫–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã —É–¥–∞—á–Ω–æ
			return 0;
		}
		// –ü–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–æ–π
		const int32_t error = ::WSAGetLastError();
		// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è
		::closesocket(listener);
		// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
		::closesocket(socks[0]);
		// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö
		::closesocket(socks[1]);
		// –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –æ—à–∏–±–∫–∏
		::WSASetLastError(error);
		// –í—ã–ø–æ–ª–Ω—è–µ–º —Å–±—Ä–æ—Å –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–∫–µ—Ç–æ–≤
		socks[0] = socks[1] = INVALID_SOCKET;
		// –í—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É
		return INVALID_SOCKET;
	}
#endif

/**
 * reset –ú–µ—Ç–æ–¥ —Å–±—Ä–æ—Å–∞ —É–≤–µ–¥–æ–º–∏—Ç–µ–ª—è
 */
void awh::Notifier::reset() noexcept {
	/**
	 * –í—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
	 */
	try {
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OS Windows
		 */
		#if _WIN32 || _WIN64
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[0] != INVALID_SOCKET){
				// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç –Ω–∞ —á—Ç–µ–Ω–∏–µ
				::closesocket(this->_socks[0]);
				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
				this->_socks[0] = INVALID_SOCKET;
			}
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[1] != INVALID_SOCKET){
				// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç –Ω–∞ –∑–∞–ø–∏—Å—å
				::closesocket(this->_socks[1]);
				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
				this->_socks[1] = INVALID_SOCKET;
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Linux –∏–ª–∏ Sun Solaris
		 */
		#elif __linux__ || __sun__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_sock != INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–∫–µ—Ç–∞
				::close(this->_sock);
				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞
				this->_sock = INVALID_SOCKET;
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OpenBSD
		 */
		#elif __OpenBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[0] != INVALID_SOCKET){
				// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç –Ω–∞ —á—Ç–µ–Ω–∏–µ
				::close(this->_socks[0]);
				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
				this->_socks[0] = INVALID_SOCKET;
			}
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[1] != INVALID_SOCKET){
				// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç –Ω–∞ –∑–∞–ø–∏—Å—å
				::close(this->_socks[1]);
				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
				this->_socks[1] = INVALID_SOCKET;
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã MacOS X, FreeBSD –∏–ª–∏ NetBSD
		 */
		#elif __APPLE__ || __MACH__ || __FreeBSD__ || __NetBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_sock != INVALID_SOCKET){
				// –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è
				struct kevent event;
				// –í—ã–ø–æ–ª–Ω—è–µ–º —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
				EV_SET(&event, USER_EVENT, EVFILT_USER, EV_DELETE, 0, 0, nullptr);
				// –í—ã–ø–æ–ª–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —è–¥—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
				::kevent(this->_sock, &event, 1, nullptr, 0, nullptr);
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–∫–µ—Ç–∞
				::close(this->_sock);
				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞
				this->_sock = INVALID_SOCKET;
			}
		#endif
	/**
	 * –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞
	 */
	} catch(const exception & error) {
		/**
		 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
		 */
		#if DEBUG_MODE
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, error.what());
		/**
		* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
		*/
		#else
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->print("%s", log_t::flag_t::CRITICAL, error.what());
		#endif
	}
}
/**
 * init –ú–µ—Ç–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–∏—Ç–µ–ª—è
 * @return —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–∫–µ—Ç–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
 */
std::array <SOCKET, 2> awh::Notifier::init() noexcept {
	// –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏
	std::array <SOCKET, 2> result = {
		INVALID_SOCKET,
		INVALID_SOCKET
	};
	/**
	 * –í—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
	 */
	try {
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OS Windows
		 */
		#if _WIN32 || _WIN64
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç—ã –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã
			if((this->_socks[0] == INVALID_SOCKET) && (this->_socks[1] == INVALID_SOCKET)){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–∞ —Å–æ–±—ã—Ç–∏—è
				if(::socketpair(this->_socks) == INVALID_SOCKET){
					// –°–æ–∑–¥–∞—ë–º –±—É—Ñ–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –æ—à–∏–±–∫–∏
					wchar_t message[256] = {0};
					// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
					this->_socks[0] = INVALID_SOCKET;
					// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
					this->_socks[1] = INVALID_SOCKET;
					// –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏
					::FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, 0, ::WSAGetLastError(), 0, message, 256, 0);
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, this->_fmk->convert(message).c_str());
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::CRITICAL, this->_fmk->convert(message).c_str());
					#endif
				}
			}
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
			result[0] = this->_socks[0];
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
			result[1] = this->_socks[1];
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Sun Solaris
		 */
		#elif __sun__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
			if(this->_sock == INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–∞ —Å–æ–±—ã—Ç–∏—è
				this->_sock = ::port_create();
				// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω
				if(this->_sock == INVALID_SOCKET){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::CRITICAL, ::strerror(errno));
					#endif
				}
			}
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
			result[0] = this->_sock;
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
			result[1] = this->_sock;
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Linux
		 */
		#elif __linux__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
			if(this->_sock == INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–∞ —Å–æ–±—ã—Ç–∏—è
				this->_sock = ::eventfd(0, EFD_NONBLOCK | EFD_CLOEXEC);
				// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω
				if(this->_sock == INVALID_SOCKET){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::CRITICAL, ::strerror(errno));
					#endif
				}
			}
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
			result[0] = this->_sock;
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
			result[1] = this->_sock;
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OpenBSD
		 */
		#elif __OpenBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç—ã –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã
			if((this->_socks[0] == INVALID_SOCKET) && (this->_socks[1] == INVALID_SOCKET)){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–∞ —Å–æ–±—ã—Ç–∏—è
				if(::pipe(this->_socks) == INVALID_SOCKET){
					// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
					this->_socks[0] = INVALID_SOCKET;
					// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
					this->_socks[1] = INVALID_SOCKET;
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::CRITICAL, ::strerror(errno));
					#endif
				// –£—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ä–µ–∂–∏–º –Ω–∞ —á—Ç–µ–Ω–∏–µ
				} else ::fcntl(this->_socks[0], F_SETFL, O_NONBLOCK);
			}
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
			result[0] = this->_socks[0];
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
			result[1] = this->_socks[1];
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã MacOS X, FreeBSD –∏–ª–∏ NetBSD
		 */
		#elif __APPLE__ || __MACH__ || __FreeBSD__ || __NetBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
			if(this->_sock == INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–∞ —Å–æ–±—ã—Ç–∏—è
				this->_sock = ::kqueue();
				// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω
				if(this->_sock == INVALID_SOCKET){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::CRITICAL, ::strerror(errno));
					#endif
				}
			}
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
			if(this->_sock != INVALID_SOCKET){
				// –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è
				struct kevent event;
				// –í—ã–ø–æ–ª–Ω—è–µ–º —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
				EV_SET(&event, USER_EVENT, EVFILT_USER, EV_DELETE, 0, 0, nullptr);
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏—è
				EV_SET(&event, USER_EVENT, EVFILT_USER, EV_ADD | EV_CLEAR, 0, 0, nullptr);
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏—é –Ω–∞—à–µ–≥–æ —Å–æ–±—ã—Ç–∏—è
				if(::kevent(this->_sock, &event, 1, nullptr, 0, nullptr) == INVALID_SOCKET){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::CRITICAL, ::strerror(errno));
					#endif
				}
			}
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
			result[0] = this->_sock;
			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
			result[1] = this->_sock;
		#endif
	/**
	 * –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞
	 */
	} catch(const exception & error) {
		/**
		 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
		 */
		#if DEBUG_MODE
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, error.what());
		/**
		* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
		*/
		#else
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->print("%s", log_t::flag_t::CRITICAL, error.what());
		#endif
	}
	// –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
	return result;
}
/**
 * event –ú–µ—Ç–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ–±—ã—Ç–∏—è
 * @return –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è
 */
uint64_t awh::Notifier::event() noexcept {
	// –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏
	uint64_t result = 0;
	/**
	 * –í—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
	 */
	try {
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OS Windows
		 */
		#if _WIN32 || _WIN64
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[0] != INVALID_SOCKET){
				// –ë—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á—Ç–µ–Ω–∏—è
				char buffer[8];
				// –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
				int8_t size = 0;
				// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
				int8_t bytes = 0;
				// –í—ã–ø–æ–ª–Ω—è–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º –≤—Å–µ
				while(size < 8){
					// –í—ã–ø–æ–ª–Ω—è–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
					bytes = static_cast <int8_t> (::recv(this->_socks[0], buffer + size, 8, 0));
					// –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã
					if(bytes > 0)
						// –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
						size += bytes;
				}
				// –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
				::memcpy(&result, buffer, size);
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Sun Solaris
		 */
		#elif __sun__
			// –í—ã–ø–æ–ª–Ω—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ—Ç–æ–∫–∞
			const lock_guard <std::mutex> lock(this->_mtx);
			// –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π –Ω–µ –ø—É—Å—Ç–∞—è
			if(!this->_events.empty()){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±—ã—Ç–∏—è
				result = this->_events.front();
				// –£–¥–∞–ª—è–µ–º –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
				this->_events.pop();
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Linux
		 */
		#elif __linux__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_sock != INVALID_SOCKET){
				// –ë—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á—Ç–µ–Ω–∏—è
				char buffer[8];
				// –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
				int8_t size = 0;
				// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
				int8_t bytes = 0;
				// –í—ã–ø–æ–ª–Ω—è–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º –≤—Å–µ
				while(size < 8){
					// –í—ã–ø–æ–ª–Ω—è–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
					bytes = static_cast <int8_t> (::read(this->_sock, buffer + size, 8));
					// –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã
					if(bytes > 0)
						// –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
						size += bytes;
				}
				// –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
				::memcpy(&result, buffer, size);
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OpenBSD
		 */
		#elif __OpenBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[0] != INVALID_SOCKET){
				// –ë—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á—Ç–µ–Ω–∏—è
				char buffer[8];
				// –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
				int8_t size = 0;
				// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
				int8_t bytes = 0;
				// –í—ã–ø–æ–ª–Ω—è–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º –≤—Å–µ
				while(size < 8){
					// –í—ã–ø–æ–ª–Ω—è–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
					bytes = static_cast <int8_t> (::read(this->_socks[0], buffer + size, 8));
					// –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã
					if(bytes > 0)
						// –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
						size += bytes;
				}
				// –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
				::memcpy(&result, buffer, size);
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã MacOS X, FreeBSD –∏–ª–∏ NetBSD 
		 */
		#elif __APPLE__ || __MACH__ || __FreeBSD__ || __NetBSD__
			// –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è
			struct kevent event;
			// –í—ã–ø–æ–ª–Ω—è–µ–º —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
			EV_SET(&event, USER_EVENT, EVFILT_USER, EV_DELETE, 0, 0, nullptr);
			// –í—ã–ø–æ–ª–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —è–¥—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
			::kevent(this->_sock, &event, 1, nullptr, 0, nullptr);
			// –í—ã–ø–æ–ª–Ω—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ—Ç–æ–∫–∞
			const lock_guard <std::mutex> lock(this->_mtx);
			// –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π –Ω–µ –ø—É—Å—Ç–∞—è
			if(!this->_events.empty()){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±—ã—Ç–∏—è
				result = this->_events.front();
				// –£–¥–∞–ª—è–µ–º –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
				this->_events.pop();
			}
		#endif
	/**
	 * –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞
	 */
	} catch(const exception & error) {
		/**
		 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
		 */
		#if DEBUG_MODE
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->debug("%s", __PRETTY_FUNCTION__, {}, log_t::flag_t::CRITICAL, error.what());
		/**
		* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
		*/
		#else
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->print("%s", log_t::flag_t::CRITICAL, error.what());
		#endif
	}
	// –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
	return result;
}
/**
 * notify –ú–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 * @param id –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
 */
void awh::Notifier::notify(const uint64_t id) noexcept {
	/**
	 * –í—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
	 */
	try {
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OS Windows
		 */
		#if _WIN32 || _WIN64
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[1] != INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
				if(::send(this->_socks[1], reinterpret_cast <const char *> (&id), sizeof(id), 0) < sizeof(id)){
					// –°–æ–∑–¥–∞—ë–º –±—É—Ñ–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –æ—à–∏–±–∫–∏
					wchar_t message[256] = {0};
					// –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏
					::FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, 0, ::WSAGetLastError(), 0, message, 256, 0);
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, std::make_tuple(id), log_t::flag_t::WARNING, this->_fmk->convert(message).c_str());
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::WARNING, this->_fmk->convert(message).c_str());
					#endif
				}
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Sun Solaris
		 */
		#elif __sun__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_sock != INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
				this->_mtx.lock();
				// –£–¥–∞–ª—è–µ–º –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
				this->_events.push(id);
				// –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
				this->_mtx.unlock();
				// –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ—Ä—Ç
				if(::port_send(this->_sock, USER_EVENT, nullptr) == INVALID_SOCKET){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, std::make_tuple(id), log_t::flag_t::WARNING, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::WARNING, ::strerror(errno));
					#endif
				}
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Linux
		 */
		#elif __linux__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_sock != INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
				if(::write(this->_sock, reinterpret_cast <const char *> (&id), sizeof(id)) < sizeof(id)){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, std::make_tuple(id), log_t::flag_t::WARNING, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::WARNING, ::strerror(errno));
					#endif
				}
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OpenBSD
		 */
		#elif __OpenBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_socks[1] != INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
				if(::write(this->_socks[1], reinterpret_cast <const char *> (&id), sizeof(id)) < sizeof(id)){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, std::make_tuple(id), log_t::flag_t::WARNING, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::WARNING, ::strerror(errno));
					#endif
				}
			}
		/**
		 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã MacOS X, FreeBSD –∏–ª–∏ NetBSD
		 */
		#elif __APPLE__ || __MACH__ || __FreeBSD__ || __NetBSD__
			// –ï—Å–ª–∏ —Å–æ–∫–µ—Ç –µ—â—ë –Ω–µ –∑–∞–∫—Ä—ã—Ç
			if(this->_sock != INVALID_SOCKET){
				// –í—ã–ø–æ–ª–Ω—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
				this->_mtx.lock();
				// –£–¥–∞–ª—è–µ–º –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
				this->_events.push(id);
				// –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
				this->_mtx.unlock();
				// –°–æ–∑–¥–∞—ë–º —Å–æ–±—ã—Ç–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞
				struct kevent trigger;
				// –í—ã–ø–æ–ª–Ω—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–æ–±—ã—Ç–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞
				EV_SET(&trigger, USER_EVENT, EVFILT_USER, 0, NOTE_TRIGGER, 0, nullptr);
				// –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–±—ã—Ç–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞
				if(::kevent(this->_sock, &trigger, 1, nullptr, 0, nullptr) == INVALID_SOCKET){
					/**
					 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
					 */
					#if DEBUG_MODE
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->debug("%s", __PRETTY_FUNCTION__, std::make_tuple(id), log_t::flag_t::WARNING, ::strerror(errno));
					/**
					* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
					*/
					#else
						// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
						this->_log->print("%s", log_t::flag_t::WARNING, ::strerror(errno));
					#endif
				}
			}
		#endif
	/**
	 * –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞
	 */
	} catch(const exception & error) {
		/**
		 * –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
		 */
		#if DEBUG_MODE
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->debug("%s", __PRETTY_FUNCTION__, std::make_tuple(id), log_t::flag_t::CRITICAL, error.what());
		/**
		* –ï—Å–ª–∏ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω
		*/
		#else
			// –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
			this->_log->print("%s", log_t::flag_t::CRITICAL, error.what());
		#endif
	}
}
/**
 * Notifier –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
 * @param fmk –æ–±—ä–µ–∫—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
 * @param log –æ–±—ä–µ–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–≥–∞–º–∏
 */
awh::Notifier::Notifier(const fmk_t * fmk, const log_t * log) noexcept : _fmk(fmk), _log(log) {
	/**
	 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã OS Windows –∏–ª–∏ OpenBSD
	 */
	#if _WIN32 || _WIN64 || __OpenBSD__
		// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
		this->_socks[0] = INVALID_SOCKET;
		// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
		this->_socks[1] = INVALID_SOCKET;
	/**
	 * –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã MacOS X, FreeBSD, NetBSD, Linux –∏–ª–∏ Sun Solaris
	 */
	#elif __APPLE__ || __MACH__ || __FreeBSD__ || __NetBSD__ || __linux__ || __sun__
		// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–∞–π–ª–æ–≤—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä
		this->_sock = INVALID_SOCKET;
	#endif
}
/**
 * ~Notifier –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä
 */
awh::Notifier::~Notifier() noexcept {
	// –í—ã–ø–æ–ª–Ω—è–µ–º —Å–±—Ä–æ—Å –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
	this->reset();
}
